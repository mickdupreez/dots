!function(){"use strict";var a=self.logger={},b=vAPI.messaging,c=a.removeAllChildren=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},d=a.tabIdFromClassName=function(a){var b=a.match(/(?:^| )tab_([^ ]+)(?: |$)/);return null===b?"":b[1]};!function(){var a=uDom.nodeFromSelector("body > .permatoolbar"),b=a.clientHeight+"px";uDom("#inspectors").css("top",b),uDom(".vscrollable").css("padding-top",b)}();var e,f=document.querySelector("#netInspector tbody"),g=[],h=[],i=2,j=4,k=5e3,l="",m={},n=document.querySelector("#hiddenTemplate > span"),o=/^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#]*)(\?[^#]*)?(#.*)?/,p=uDom.nodeFromId("netFilteringDialog"),q={main_frame:"doc",stylesheet:"css",sub_frame:"frame",xmlhttprequest:"xhr"},r={doc:"main_frame",css:"stylesheet",frame:"sub_frame",xhr:"xmlhttprequest"},s={doc:"document",css:"stylesheet",frame:"subdocument",xhr:"xmlhttprequest"},t=function(a){return a===l?"tab_bts":""!==a?"tab_"+a:""},u=function(a){var b=a.indexOf(" "),c=a.indexOf(" ",b+1),d=a.slice(b+1,c);return"*"===d?new RegExp("^.*$","gi"):new RegExp("^"+d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")},v=function(a,b){if(b instanceof RegExp==!1)return document.createTextNode(a);var c=b.exec(a);if(null===c||0===c[0].length)return document.createTextNode(a);var d=w.cloneNode(!0);return d.childNodes[0].textContent=a.slice(0,c.index),d.childNodes[1].textContent=a.slice(c.index,b.lastIndex),d.childNodes[2].textContent=a.slice(b.lastIndex),d},w=document.querySelector("#renderedURLTemplate > span"),x=function(){var a={1:"stylesheet",2:"image",3:"object",4:"script",5:"xmlhttprequest",6:"subdocument",7:"font",8:"media",9:"websocket",10:"other",11:"popunder",12:"document",13:"generichide",14:"inline-script",15:"popup"},b=function(b){var c=[],d=b.split(""),e="",f=0|parseInt(d[0],16);1&f&&(e+="@@");var g="."===d[1]?".":d[2],h="."!==g?d[3].split("	"):[],i=h[0];2&f&&c.push("important"),8&f?c.push("third-party"):4&f&&c.push("first-party");var j=f>>>4&15;switch(j&&c.push(a[j]),g){case".":e+="||"+d[2]+"^";break;case"a":case"ah":case"0a":case"0ah":case"1a":case"1ah":case"_":case"_h":e+=i,"/"===i.charAt(0)&&"/"===i.slice(-1)&&(e+="*");break;case"|a":case"|ah":e+="|"+i;break;case"a|":case"a|h":e+=i+"|";break;case"||a":case"||ah":e+="||"+i;break;case"||_":case"||_h":e+="||"+i,"1"===h[1]&&(e+="|");break;case"//":case"//h":e+="/"+i+"/";break;default:return b.replace(/\s+/g," ")}switch(g){case"0ah":case"1ah":case"|ah":case"a|h":case"||ah":case"//h":c.push("domain="+h[1]);break;case"ah":case"_h":case"||_h":c.push("domain="+h[2])}return 0!==c.length&&(e+="$"+c.join(",")),e},c=/[.[\]]/g,d=/[.+?${}()|[\]\\]/g,e=/\*+/g,f=/\^/g,g=function(a){var b,g=a.split(""),h="."===g[1]?".":g[2],i="."!==h?g[3].split("	"):[];switch(h){case".":b=g[2].replace(c,"\\$&")+"(?:[^%.0-9a-z_-]|$)";break;case"a":case"ah":case"0a":case"0ah":case"1a":case"1ah":case"|a":case"|ah":case"a|":case"a|h":case"_":case"_h":b=i[0].replace(d,"\\$&").replace(e,".*?").replace(f,"(?:[^%.0-9a-z_-]|$)");break;case"||a":case"||ah":case"||_":case"||_h":b="",42===i[0].charCodeAt(0)&&(b="[0-9a-z.-]*?",i[0]=i[0].slice(1)),b+=i[0].replace(d,"\\$&").replace(e,".*?").replace(f,"(?:[^%.0-9a-z_-]|$)");break;case"//":case"//h":b=i[0]}var j=h.slice(0,2);return"|a"===j?b="^"+b:"a|"===j&&(b+="$"),void 0===b?null:new RegExp(b,"gi")};return{toString:b,toRegex:g}}(),y=function(a,b){var c=a.cells[b],d=!c;return d&&(c=h.pop()),c?(c.removeAttribute("colspan"),c.textContent=""):c=document.createElement("td"),d&&a.appendChild(c),c},z=function(a){var b=g.pop();b?(b.className="",b.removeAttribute("data-hn-page"),b.removeAttribute("data-hn-frame"),b.removeAttribute("data-filter")):b=document.createElement("tr");for(var c=0;i>c;c++)y(b,c);for(var d,e=1,f=1;d=y(b,c),e!==j;)"1"!==a.charAt(e)?f+=1:(1!==f&&d.setAttribute("colspan",f),c+=1,f=1),e+=1;for(1!==f&&d.setAttribute("colspan",f),c+=1;d=b.cells[c];)h.push(b.removeChild(d));return b},A=function(a){var b=n.cloneNode(!0);return b.textContent=a,b},B=function(a){return 10>a?"0"+a:a},C=function(a,b){var c=z("1");c.classList.add("tab"),c.classList.add("canMtx"),c.classList.add("tab_"+a),c.classList.add("maindoc"),c.cells[i].textContent=b,f.insertBefore(c,f.firstChild)},D=function(a,b){var c,d=a.classList,e=b.d0,f=b.d1,g=b.d2;d.add("canMtx"),"main_frame"===f&&C(b.tab,g),b.d3&&a.setAttribute("data-hn-page",b.d3),b.d4&&a.setAttribute("data-hn-frame",b.d4);var h=e.slice(0,3);":"===h.charAt(2)&&d.add(h.slice(0,2));var i=h.charAt(0);c=a.cells[2],""!==e&&(e=e.slice(3),"s"===i?(c.textContent=x.toString(e),d.add("canLookup"),a.setAttribute("data-filter",e)):"c"===i?(c.textContent=e,d.add("canLookup")):c.textContent=e),c=a.cells[3];var j=h.charAt(1);"b"===j?(d.add("blocked"),c.textContent="--"):"a"===j?(d.add("allowed"),c.textContent="++"):"n"===j?(d.add("nooped"),c.textContent="**"):"r"===j?(d.add("redirected"),c.textContent="<<"):c.textContent="",a.cells[4].textContent=q[f]||f;var k=null;"s"===i?k=x.toRegex(e):"l"===i&&(k=u(e)),a.cells[5].appendChild(v(g,k))},E=function(a){var b,c=i;switch(a.cat){case"error":case"info":b=z("1"),b.cells[c].textContent=a.d0;break;case"cosmetic":case"net":case"redirect":b=z("1111"),D(b,a);break;default:b=z("1"),b.cells[c].textContent=a.d0}var d=F;return d.setTime(a.tstamp-G),b.cells[0].textContent=B(d.getUTCHours())+":"+B(d.getUTCMinutes())+":"+B(d.getSeconds()),a.tab&&(b.classList.add("tab"),b.classList.add(t(a.tab)),a.tab===l&&b.cells[1].appendChild(A("bts"))),""!==a.cat&&b.classList.add("cat_"+a.cat),S.filterOne(b,!0),f.insertBefore(b,f.firstChild),b},F=new Date,G=6e4*F.getTimezoneOffset(),H=function(a){document.body.classList.toggle("colorBlind",a.colorBlind);var b=a.entries;if(0!==b.length){for(var c,d,e=f.offsetHeight,g=a.tabIds,h=b.length,i=0;h>i;i++)c=b[i],d=E(b[i]),c.tab&&g.hasOwnProperty(c.tab)===!1&&d.classList.remove("canMtx");J(k);var j=f.offsetHeight-e;if(0!==j){var l=uDom.nodeFromSelector("#netInspector .vscrollable");0!==l.scrollTop&&(l.scrollTop+=j)}}},I=function(a){var b,c=m,d=!!vAPI.localStorage.getItem("loggerAutoDeleteVoidRows"),e=!1;for(var f in c)c.hasOwnProperty(f)!==!1&&(a.hasOwnProperty(f)||(b=uDom(".tab_"+f),d?T(b):(b.removeClass("canMtx"),e=!0),f===Y.tabId&&Y.toggleOff()));for(var g,h=uDom.nodeFromId("pageSelector"),i=h.value,j=Object.keys(a).sort(function(b,c){return a[b].localeCompare(a[c])}),k=0,n=2;k<j.length;k++)f=j[k],f!==l&&(g=h.options[n],g||(g=document.createElement("option"),h.appendChild(g)),g.textContent=a[f].slice(0,80),g.value=t(f),g.value===i?(h.selectedIndex=n,g.setAttribute("selected","")):g.removeAttribute("selected"),n+=1);for(;n<h.options.length;)h.removeChild(h.options[n]);return h.value!==i&&(h.selectedIndex=0,h.value="",h.options[0].setAttribute("selected",""),M()),m=a,e},J=function(a){0===a&&(a=5e3);var b=document.querySelector("#netInspector tbody");a=Math.min(a,1e4);for(var c;b.childElementCount>a;)c=b.lastElementChild,g.push(b.removeChild(c))},K=function(a){l=a.noTabId,a.maxEntries!==k&&(k=a.maxEntries,uDom("#maxEntries").val(k||""));var b=!1;a.tabIdsToken!==e&&(b=I(a.tabIds),e=a.tabIdsToken),N(),H(a),b&&uDom("#clean").toggleClass("disabled",null===f.querySelector("#netInspector tr.tab:not(.canMtx)")),uDom("#clear").toggleClass("disabled",null===f.querySelector("tr")),vAPI.setTimeout(L,1200)},L=function(){b.send("loggerUI",{what:"readAll"},K)},M=function(){window.location.replace("#"+uDom.nodeFromId("pageSelector").value),N()},N=function(){var a="";return function(){var b=window.location.hash;if(b!==a){var c=b.slice(1),d=uDom.nodeFromId("pageSelector"),e=d.querySelector('option[value="'+c+'"]');null===e&&(b=window.location.hash="",c="",e=d.options[0]),a=b,d.selectedIndex=e.index,d.value=e.value;for(var f=uDom.nodeFromId("tabFilterer"),g=f.sheet;0!==g.cssRules.length;)g.deleteRule(0);""!==c&&g.insertRule("#netInspector tr:not(."+c+") { display: none; }",0),uDom(".needtab").toggleClass("disabled",""===c||"tab_bts"===c)}}}(),O=function(){var a=uDom.nodeFromId("pageSelector").value,c=d(a);"bts"!==c&&""!==c&&b.send("loggerUI",{what:"reloadTab",tabId:c})},P=function(){var a=this;try{k=parseInt(a.value,10),(0===k||isNaN(k))&&(k=1e3)}catch(c){k=1e3}k=Math.min(k,5e3),k=Math.max(k,10),a.value=k.toString(10),b.send("loggerUI",{what:"userSettings",name:"requestLogMaxEntries",value:k}),J(k)},Q=function(){var a,e,f,g,h,i,j,k=null,m=null,n={},q=[],t=function(a){var b=v("select.type."+a);return"static"===a?s[b]||b:r[b]||b},u=function(a){return m.querySelector(a)},v=function(a){return u(a).value||""},w=function(){return m.querySelector("div.containers > div.static textarea")},x=function(a){document.body.classList.toggle("dirty",a.dirty);var b,c,d=a.colors;for(var e in d)d.hasOwnProperty(e)!==!1&&(b=d[e],c=m.querySelector('.dynamic .entry .action[data-url="'+e+'"]'),null!==c&&(c.classList.toggle("allow",2===b.r),c.classList.toggle("noop",3===b.r),c.classList.toggle("block",1===b.r),c.classList.toggle("own",b.own)))},y=function(){b.send("loggerUI",{what:"getURLFilteringData",context:v("select.dynamic.origin"),urls:q,type:t("dynamic")},x)},z=function(){var a="",b=[],c=""===v("select.static.action");c||(a="@@");var d=v("select.static.url");""!==d&&(a+="||"+d),d=v("select.static.type"),""!==d&&b.push(t("static")),d=v("select.static.origin"),""!==d&&(d===h?b.push("first-party"):b.push("domain="+d)),c&&""!==v("select.static.importance")&&b.push("important"),b.length&&(a+="$"+b.join(",")),w().value=a,A()},A=function(){var a=w().value;m.querySelector("#createStaticFilter").classList.toggle("disabled",n.hasOwnProperty(a)||""===a)},B=function(a){var c=a.target;if(c.classList.contains("modalDialog"))return void M();a.stopPropagation();var d,e=c.classList;if(e.contains("header")){if(e.contains("selected"))return;return uDom(".header").removeClass("selected"),uDom(".container").removeClass("selected"),d=c.getAttribute("data-container"),uDom(".header."+d).addClass("selected"),void uDom(".container."+d).addClass("selected")}if("createStaticFilter"===c.id){if(d=w().value,n.hasOwnProperty(d))return;if(n[d]=!0,""!==d){var f=new Date;b.send("loggerUI",{what:"createUserFilter",pageDomain:i,filters:"! "+f.toLocaleString()+" "+i+"\n"+d})}return void A()}if("saveRules"===c.id)return void b.send("loggerUI",{what:"saveURLFilteringRules",context:v("select.dynamic.origin"),urls:q,type:t("dynamic")},y);var h=!!a.ctrlKey||!!a.metaKey;return e.contains("action")?void b.send("loggerUI",{what:"setURLFilteringRule",context:v("select.dynamic.origin"),url:c.getAttribute("data-url"),type:t("dynamic"),action:0,persist:h},y):e.contains("allow")?void b.send("loggerUI",{what:"setURLFilteringRule",context:v("select.dynamic.origin"),url:c.parentNode.getAttribute("data-url"),type:t("dynamic"),action:2,persist:h},y):e.contains("noop")?void b.send("loggerUI",{what:"setURLFilteringRule",context:v("select.dynamic.origin"),url:c.parentNode.getAttribute("data-url"),type:t("dynamic"),action:3,persist:h},y):e.contains("block")?void b.send("loggerUI",{what:"setURLFilteringRule",context:v("select.dynamic.origin"),url:c.parentNode.getAttribute("data-url"),type:t("dynamic"),action:1,persist:h},y):e.contains("reload")?void b.send("loggerUI",{what:"reloadTab",tabId:g}):e.contains("picker")?void b.send("loggerUI",{what:"launchElementPicker",tabId:g,targetURL:"img	"+q[0],select:!0}):void 0},C=function(a){var b=a.target,c=b.classList;return c.contains("dynamic")?void y():c.contains("static")?void z():void 0},D=function(){A()},E=function(b,c){m.querySelector(".picker").classList.toggle("hide",g===l||"image"!==a||/(?:^| )[dlsu]b(?: |$)/.test(k.className));var d=null;"image"===b&&(d=document.createElement("img"),d.setAttribute("src",c));var e=m.querySelector("div.preview");e.classList.toggle("hide",null===d),null!==d&&e.appendChild(d)},F=function(a,b){var c=a.length;if(b>=c)return a;var d=c-b-1,e=(c-d)/2|0;return a.slice(0,e)+"â€¦"+a.slice(e+d)},G=function(a){var b=[],c=o.exec(a);if(null===c||!c[1]||!c[2])return b;var d=c[1]+c[2];b.unshift(d);for(var e=c[3]||"",f="/"===e.charAt(0)?1:0;f<e.length;)f=e.indexOf("/",f+1),-1===f&&(f=e.length),b.unshift(d+e.slice(0,f));var g=c[4]||"";return""!==g&&b.unshift(d+e+g),b},H=function(){var b;b=u("select.dynamic.origin"),c(b),I(b,f,i);var d=document.createElement("option");d.textContent="*",d.setAttribute("value","*"),b.appendChild(d),b=u("select.dynamic.type"),b.options[0].textContent=a,b.options[0].setAttribute("value",a),b.selectedIndex=0;for(var e,g,h=m.querySelector("table.toolbar tr.entry"),j=m.querySelector("div.dynamic table.entries tbody"),k=0;k<q.length;k++)e=q[k],g=h.cloneNode(!0),g.cells[0].children[0].setAttribute("data-url",e),g.cells[1].textContent=F(e,128),j.appendChild(g);y()},I=function(a,b,c){for(var d,e,f=vAPI.i18n("loggerStaticFilteringSentencePartOrigin"),g=b;(d=document.createElement("option"),d.setAttribute("value",g),d.textContent=f.replace("{{origin}}",g),a.appendChild(d),g!==c)&&(e=g.indexOf("."),-1!==e);)g=g.slice(e+1)},J=function(){for(var b,d,f,g,h,i=vAPI.i18n("loggerStaticFilteringSentence"),k=/\{\{[^}]+?\}\}/g,l=[],n=0;b=k.exec(i),null!==b;)switch(n!==b.index&&l.push(document.createTextNode(i.slice(n,b.index))),n=k.lastIndex,b[0]){case"{{br}}":l.push(document.createElement("br"));break;case"{{action}}":d=document.createElement("select"),d.className="static action",f=document.createElement("option"),f.setAttribute("value",""),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartBlock"),d.appendChild(f),f=document.createElement("option"),f.setAttribute("value","@@"),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartAllow"),d.appendChild(f),l.push(d);break;case"{{type}}":d=document.createElement("select"),d.className="static type",f=document.createElement("option"),f.setAttribute("value",a),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartType").replace("{{type}}",a),d.appendChild(f),f=document.createElement("option"),f.setAttribute("value",""),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartAnyType"),d.appendChild(f),l.push(d);break;case"{{url}}":for(d=document.createElement("select"),d.className="static url",g=0;g<q.length;g++)h=q[g].replace(/^[a-z]+:\/\//,""),f=document.createElement("option"),f.setAttribute("value",h),f.textContent=F(h,128),d.appendChild(f);l.push(d);break;case"{{origin}}":d=document.createElement("select"),d.className="static origin",I(d,e,j),f=document.createElement("option"),f.setAttribute("value",""),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartAnyOrigin"),d.appendChild(f),l.push(d);break;case"{{importance}}":d=document.createElement("select"),d.className="static importance",f=document.createElement("option"),f.setAttribute("value",""),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartNotImportant"),d.appendChild(f),f=document.createElement("option"),f.setAttribute("value","important"),f.textContent=vAPI.i18n("loggerStaticFilteringSentencePartImportant"),d.appendChild(f),l.push(d)}n<i.length&&l.push(document.createTextNode(i.slice(n)));var o=m.querySelector("div.containers > div.static > p:first-of-type");for(c(o),g=0;g<l.length;g++)o.appendChild(l[g]);z()},K=function(b){h=b[0],i=b[1],j=b[2],E(a,q[0]),H(),J(),document.body.appendChild(p),p.addEventListener("click",B,!0),p.addEventListener("change",C,!0),p.addEventListener("input",D,!0)},L=function(c){m=p.querySelector(".dialog"),k=c.target.parentElement,g=d(k.className),a=k.cells[4].textContent.trim()||"",q=G(k.cells[5].textContent),f=k.getAttribute("data-hn-page")||"",e=k.getAttribute("data-hn-frame")||"",b.send("loggerUI",{what:"getDomainNames",targets:[q[0],f,e]},K)},M=function(){c(m.querySelector("div.preview")),c(m.querySelector("div.dynamic table.entries tbody")),m=null,k=null,q=[],p.removeEventListener("click",B,!0),p.removeEventListener("change",C,!0),p.removeEventListener("input",D,!0),document.body.removeChild(p)};return{toggleOn:L}}(),R=function(){var a=/\{\{filter\}\}/g,c=vAPI.i18n("loggerStaticFilteringFinderSentence1"),d=uDom.nodeFromId("filterFinderDialog"),e=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},f=function(a){var b=a.target;return b.classList.contains("modalDialog")?void j():void a.stopPropagation()},g=function(b,d){if(Array.isArray(d)===!1||0===d.length)return null;var e,f=document.createElement("p");a.lastIndex=0;var g=a.exec(c);null===g?e=document.createTextNode(c):(e=uDom.nodeFromSelector("#filterFinderDialogSentence1 > span").cloneNode(!0),e.childNodes[0].textContent=c.slice(0,g.index),e.childNodes[1].textContent=b,e.childNodes[2].textContent=c.slice(a.lastIndex)),f.appendChild(e);for(var h,i,j=document.createElement("ul"),k=0;k<d.length;k++)h=d[k],i=document.createElement("li"),h.supportURL?(e=document.createElement("a"),e.textContent=h.title,e.setAttribute("href",h.supportURL),e.setAttribute("target","_blank")):e=document.createTextNode(h.title),i.appendChild(e),j.appendChild(i);return f.appendChild(j),f},h=function(a){if("object"==typeof a){var b=d.querySelector(".dialog");e(b);for(var c in a){var h=g(c,a[c]);null!==h&&b.appendChild(h)}document.body.appendChild(d),d.addEventListener("click",f,!0)}},i=function(a){var c=a.target.parentElement,d=c.cells[2].textContent;""!==d&&(c.classList.contains("cat_net")?b.send("loggerUI",{what:"listsFromNetFilter",compiledFilter:c.getAttribute("data-filter")||"",rawFilter:d},h):c.classList.contains("cat_cosmetic")&&b.send("loggerUI",{what:"listsFromCosmeticFilter",hostname:c.getAttribute("data-hn-frame")||"",rawFilter:d},h))},j=function(){d.removeEventListener("click",f,!0),document.body.removeChild(d)};return{toggleOn:i}}(),S=function(){var a=[],b=function(){a=[];for(var b,c,d,e,f=uDom("#filterInput").val().trim(),g=f.split(/\s+/),h=[],i=!1,j=g.length,k=0;j>k;k++)b=g[k],"!"===b.charAt(0)&&(0===h.length&&(i=!0),b=b.slice(1)),c="|"===b.charAt(0),c&&(b=b.slice(1)),d="|"===b.slice(-1),d&&(b=b.slice(0,-1)),""!==b&&(e=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c&&(e="(?:^|\\s)"+e),d&&(e+="(?:\\s|$)"),h.push(e),j-1>k&&"||"===g[k+1]?k+=1:(e=1===h.length?h[0]:h.join("|"),a.push({re:new RegExp(e,"i"),r:!i}),h=[],i=!1))},c=function(b,c){var d=a,e=d.length;if(0!==e||c!==!0){var f=b.classList;if(!f.contains("maindoc")){if(0===e)return void f.remove("f");for(var g,h,i,j=b.cells,k=j.length,l=0;e>l;l++){for(i=d[l],g=!i.r,h=0;k>h;h++)if(i.re.test(j[h].textContent)){g=i.r;break}if(!g)return void f.add("f")}f.remove("f")}}},d=function(){if(0===a.length)return void uDom("#netInspector tr").removeClass("f");for(var b=document.querySelector("#netInspector tbody"),d=b.rows,e=d.length;e--;)c(d[e])},e=function(){var a=null,c=function(){a=null,b(),d()};return function(){null!==a&&clearTimeout(a),a=vAPI.setTimeout(c,750)}}(),f=function(){uDom.nodeFromId("netInspector").classList.toggle("f")};return uDom("#filterButton").on("click",f),uDom("#filterInput").on("input",e),b(),d(),{filterOne:c,filterAll:d}}(),T=function(a){a.remove();for(var b=a.length;b--;)g.push(a.nodeAt(b))},U=function(){for(var a,b=uDom.nodeFromId("pageSelector").value||null,c=document.querySelector("#netInspector tbody"),d=c.lastElementChild;null!==d;)a=d.previousElementSibling,(null===b||d.classList.contains(b))&&g.push(c.removeChild(d)),d=a;uDom.nodeFromId("clear").classList.toggle("disabled",0===c.childElementCount),uDom.nodeFromId("clean").classList.toggle("disabled",null===c.querySelector("#netInspector tr.tab:not(.canMtx)"))},V=function(){for(var a=uDom("#netInspector tr.tab:not(.canMtx)").remove(),b=a.length;b--;)g.push(a.nodeAt(b));uDom("#clean").addClass("disabled")},W=function(){uDom.nodeFromId("netInspector").classList.toggle("compactView")},X=function(){uDom.nodeFromId("inspectors").classList.toggle("dom")},Y=function(){var a=null,b=null,c=null,e=null,f=null,g=null,h=["#netInspector tr:not(.tab_{{tabId}}) {","cursor: not-allowed;","opacity: 0.2;","}"].join("\n"),i=function(){if(null!==e){var a=e.contentWindow.document.body;0!==a.clientWidth&&c.clientWidth!==a.clientWidth&&c.style.setProperty("width",a.clientWidth+"px"),0!==a.clientHeight&&e.clientHeight!==a.clientHeight&&e.style.setProperty("height",a.clientHeight+"px")}},j=function(){c.classList.toggle("hide")},k=function(){i(),f.observe(e.contentDocument.body,{subtree:!0,attributes:!0})},m=function(m){var o=m.parentNode;if(a=b=d(o.className),""!==a){"bts"===b&&(a=l),c=uDom.nodeFromId("popupContainer"),c.querySelector("div > span:nth-of-type(1)").addEventListener("click",j),c.querySelector("div > span:nth-of-type(2)").addEventListener("click",n),e=document.createElement("iframe"),e.addEventListener("load",k),e.setAttribute("src","popup.html?tabId="+a),f=new MutationObserver(i),c.appendChild(e),g=uDom.nodeFromId("popupFilterer"),g.textContent=h.replace("{{tabId}}",b);var p=uDom.nodeFromId("netInspector"),q=p.getBoundingClientRect();c.style.setProperty("top",q.top+"px"),c.style.setProperty("right",q.right-p.clientWidth+"px"),p.classList.add("popupOn")}},n=function(){uDom.nodeFromId("netInspector").classList.remove("popupOn"),c.querySelector("div > span:nth-of-type(1)").removeEventListener("click",j),c.querySelector("div > span:nth-of-type(2)").removeEventListener("click",n),c.classList.remove("hide"),e.removeEventListener("load",k),f.disconnect(),f=null,e.setAttribute("src",""),c.removeChild(e),e=null,g.textContent="",g=null,c=null,a=null},o={toggleOn:function(b){null===a&&m(b.target)},toggleOff:function(){null!==a&&n()}};return Object.defineProperty(o,"tabId",{get:function(){return a||0}}),o}();L(),uDom("#pageSelector").on("change",M),uDom("#refresh").on("click",O),uDom("#showdom").on("click",X),uDom("#compactViewToggler").on("click",W),uDom("#clean").on("click",V),uDom("#clear").on("click",U),uDom("#maxEntries").on("change",P),uDom("#netInspector table").on("click","tr.canMtx > td:nth-of-type(2)",Y.toggleOn),uDom("#netInspector").on("click","tr.canLookup > td:nth-of-type(3)",R.toggleOn),uDom("#netInspector").on("click","tr.cat_net > td:nth-of-type(4)",Q.toggleOn),window.addEventListener("hashchange",N)}();